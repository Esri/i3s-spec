{
  "title": "store [common profiles]",
  "type": "object",
  "$schema": "http://json-schema.org/draft-04/schema",
  "description": "The store object describes the exact physical storage of a layer and enables the client to detect when multiple layers are served from the same store. Storing multiple layers in a single store - and thus having them share resources - enables efficient serving of many layers of the same content type, but with different attribute schemas or different symbology applied.",
  "$include": "store.cmn.0106.json",
  "properties": {
    "nidEncoding": {
      "type": "string",
      "description": "Depricated in 1.7. MIME type for the encoding used for the Node Index Documents. Example: application/vnd.esri.I3S.json+gzip; version=1.6."
    },
    "featureEncoding": {
      "type": "string",
      "description": "Depricated in 1.7. MIME type for the encoding used for the Feature Data Resources. For example: application/vnd.esri.I3S.json+gzip; version=1.6."
    },
    "geometryEncoding": {
      "type": "string",
      "description": "Depricated in 1.7. MIME type for the encoding used for the Geometry Resources. For example: application/octet-stream; version=1.6."
    },
    "attributeEncoding": {
      "type": "string",
      "description": "Depricated in 1.7. MIME type for the encoding used for the Attribute Resources. For example: application/octet-stream; version=1.6."
    },
    "textureEncoding": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Depricated in 1.7. MIME type(s) for the encoding used for the Texture Resources."
    },
    "lodType": {
      "type": "string",
      "enum": [
        "MeshPyramid",
        "AutoThinning",
        "Clustering",
        "Generalizing"
      ],
      "enum-description": {
        "MeshPyramid": "Used for integrated mesh and 3D scene layer.",
        "AutoThinning": "Use for point scene layer.",
        "Clustering": "Fill in which profile types are using this lodType",
        "Generalizing": "Fill in which profile types are using this lodType"
      },
      "description": "Depricated in 1.7. Optional field to indicate which LoD generation scheme is used in this store."
    },
    "lodModel": {
      "type": "string",
      "enum": [
        "node-switching",
        "none"
      ],
      "enum-description": {
        "node-switching": "A parent node is substituted for its children nodes when its lod threshold is exceeded. This implies that: parent and children are never shown at the same time.  The bounding volumne of the parent has to enclose the features of all grandchildren. Nodes have a single parent, except the root node that have no parent.",
        "none": "No switching model."
      },
      "description": "Depricated in 1.7. Optional field to indicate the [LoD switching](lodSelection.cmn.md) mode."
    },
    "indexingScheme": {
      "type": "string",
      "description": "Depricated in 1.7. Information on the Indexing Scheme (QuadTree, R-Tree, Octree, ...) used."
    },
    "defaultTextureDefinition": {
      "type": "array",
      "items": {
        "type": "object"
      },
      "description": "Depricated in 1.7. A common, global TextureDefinition to be used for all textures in this store. The default texture definition uses a reduced profile of the full TextureDefinition, with the following attributes being mandatory: encoding, uvSet, wrap and channels.",
      "$ref": "texture.cmn.0106.json"
    },
    "defaultMaterialDefinition": {
      "type": "array",
      "items": {
        "type": "object"
      },
      "description": "Depricated in 1.7. If a store uses only one material, it can be defined here entirely as a MaterialDefinition.",
      "$ref": "materialDefinition.cmn.0106.json"
    }
  },
  "required": [
    "profile",
    "version",
    "defaultGeometrySchema"
  ],
  "additionalProperties": false,
  "esriDocumentation": {
    "examples": [
      {
        "title": "Store example",
        "code": {
          "id": "e9ecfade-0d85-4dd7-abb5-a3b0a07b9fd7",
          "profile": "meshpyramids",
          "resourcePattern": [
            "3dNodeIndexDocument",
            "SharedResource",
            "Geometry",
            "Attributes"
          ],
          "rootNode": "./nodes/root",
          "version": "1.4",
          "extent": [
            -106.5054122583675,
            38.994677805489189,
            -103.99630101552692,
            39.996971340614706
          ],
          "indexCRS": "http://www.opengis.net/def/crs/EPSG/0/4326",
          "vertexCRS": "http://www.opengis.net/def/crs/EPSG/0/4326",
          "nidEncoding": "application/vnd.esri.i3s.json+gzip; version=1.4",
          "featureEncoding": "application/vnd.esri.i3s.json+gzip; version=1.4",
          "geometryEncoding": "application/octet-stream; version=1.4",
          "attributeEncoding": "application/octet-stream; version=1.4",
          "textureEncoding": [
            "image/jpeg",
            "image/vnd-ms.dds"
          ],
          "lodType": "MeshPyramid",
          "lodModel": "node-switching",
          "defaultGeometrySchema": {
            "geometryType": "triangles",
            "header": [
              {
                "property": "vertexCount",
                "type": "UInt32"
              },
              {
                "property": "featureCount",
                "type": "UInt32"
              }
            ],
            "topology": "PerAttributeArray",
            "ordering": [
              "position",
              "normal",
              "uv0",
              "color"
            ],
            "vertexAttributes": {
              "position": {
                "valueType": "Float32",
                "valuesPerElement": 3
              },
              "normal": {
                "valueType": "Float32",
                "valuesPerElement": 3
              },
              "uv0": {
                "valueType": "Float32",
                "valuesPerElement": 2
              },
              "color": {
                "valueType": "UInt8",
                "valuesPerElement": 4
              }
            },
            "featureAttributeOrder": [
              "id",
              "faceRange"
            ],
            "featureAttributes": {
              "id": {
                "valueType": "UInt64",
                "valuesPerElement": 1
              },
              "faceRange": {
                "valueType": "UInt32",
                "valuesPerElement": 2
              }
            }
          }
        }
      }
    ]
  }
}