{
  "title": "Instance buffer definition",
  "type": "object",
  "$schema": "http://json-schema.org/draft-04/schema",
  "description": "Describes the layout of an instance buffer",
  "properties": {
    "scale": {
      "type": "object",
      "$ref": "geometryposition_schema.json",
      "description": "Scaling on the local mesh `X`, `Y` and `Z` axis respectively"
    },
    "rotation": {
      "type": "object",
      "$ref": "geometryquaternion_schema.json",
      "description": "Unit 4-component quaternion defining the local mesh rotation.  _TBD_ ?"
    },
    "translation": {
      "type": "object",
      "$ref": "geometryposition_schema.json",
      "description": "local mesh offset. the absolute position will be `vertex_xyz+instanceBuffer[i].translation+node[j].obb.center`"
    },
    "color": {
      "type": "object",
      "$ref": "geometrycolor_schema.json",
      "description": "`color.binding` is ignored. Instance colors will be used in place of `materialDefinitions[].pbrMetallicRoughness.baseColorFactor` for _all meshes_ of the geometry to be instanciated"
    },
    "featureId": {
      "type": "object",
      "$ref": "geometryfeatureid_schema.json",
      "description": "`featureId.binding` must be omitted or `per-instance`. Each instance will have a single `featureID`. (i.e. primitives are assigned _one_ featureId per instance)"
    }
  },
  "required": [
    "index"
  ],
  "esriDocumentation": {
    "examples": [
      {
        "title": "Instance buffer with scale/rotation/translation transformation ( e.g. url: `layers/0/nodes/{resource_id}/instances/0`)",
        "code": {
            "scale": {
              "type": "Float32",
              "component": 3
            },
            "rotation": {
              "type": "Float32",
              "component": 4
            },
            "translation": {
              "type": "Float32",
              "component": 3
            },
            "featureId": {
              "type": "Uint32",
              "component": 1
            }
          }
        }
      
    ]
  }
}