{
  "title": "Node object",
  "type": "object",
  "$schema": "http://json-schema.org/draft-04/schema",
  "description": "",
  "related": "meshv2::layer",
  "properties": {
    "index": {
      "type": "integer",
      "description": "index in the node array. may be *different that `resourceId`*"
    },
    "lodThreshold": {
      "type": "number",
      "description": "When to swith LOD"
    },
    "obb": {
      "type": "string",
      "$ref": "../../common/schema/obb_schema.json",
      "description": "Oriented bounding box for this node. Includes all meshes."
    },
    "children": {
      "type": "array",
      "items": {
        "type": "integer"
      },
      "description": "index of the children nodes"
    },
    "meshes": {
      "type": "array",
      "items": {
        "type": "object",
        "$ref": "mesh_schema.json"
      },
      "description": "array of meshes"
    },
    "instances": {
      "type": "object",
      "$ref": "instance_schema.json",
      "description": "Geometry instancing"
    }
  },
  "required": [
    "index",
    "obb"
  ],
  "esriDocumentation": {
    "examples": [
      {
        "title": "Leaf node with the same geometry repeated twice with a different transformation",
        "code": {
          "index": 12,
          "lodThreshold": 50.43,
          "obb": {
            "center": [ 20.82, 41.988, 76.56 ],
            "halfSize": [ 64.93, 11.4, 70.3150 ],
            "quaternion": [ -0.00, 0.030, -0.20569, 10.9 ]
          },
          "meshes": [
            {
              "materialId": 0,
              "geometryDefinitionId": 0,
              "resourceId": 478,
              "vertexCount": 526,
              "featureCount": 0,
              "translation": [ 500.0, 0.0, 0.0 ]
            },
            {
              "materialId": 0,
              "geometryDefinitionId": 0,
              "resourceId": 478,
              "vertexCount": 526,
              "featureCount": 0,
              "rotation": [ 0.0, 90.0, 0.0 ],
              "translation": [ 100.0, 200.0, 0.0 ]
            }
          ]
        }
      },
      {
        "title": "Node with a two un-indexed, un-textured meshes and two children nodes",
        "code": {
          "index": 1024,
          "lodThreshold": 50.43,
          "obb": {
            "center": [ 20.82, 41.988, 76.56 ],
            "halfSize": [ 64.93, 11.4, 70.3150 ],
            "quaternion": [ -0.00, 0.030, -0.20569, 10.9 ]
          },
          "children": [ 1025, 1026 ],
          "meshes": [
            {
              "materialId": 0,
              "geometryDefinitionId": 0,
              "resourceId": 478,
              "vertexCount": 526,
              "featureCount": 26
            },
            {
              "materialId": 10,
              "geometryDefinitionId": 1,
              "resourceId": 478,
              "vertexCount": 106,
              "featureCount": 7
            }
          ]
        }
      },
      {
        "title": "Node with a single indexed/textured mesh instanced 142 times using the instance buffer at layers/0/nodes/1014/{instanceBufferDefinitions[3].index} ",
        "code": {
          "index": 4352,
          "lodThreshold": 3161.3,
          "obb": {
            "center": [ 2.82, 41.988, 76.56 ],
            "halfSize": [ 14.93, 11.4, 7.3150 ],
            "quaternion": [ -0.070, 0.0305, -0.0569, 0.9 ]
          },
          "children": [ 23, 7890, 253 ],
          "meshes": [
            {
              "materialId": 0,
              "geometryDefinitionId": 0,
              "resourceId": 12488,
              "texelCountHint": 1048576,
              "vertexCount": 526,
              "indexCount": 21750,
              "featureCount": 26
            }
          ],
          "instances": {
            "instanceDefinitionId": 3,
            "resourceId": 1014,
            "instanceCount": 142
          }
        }
      }
    ]
  }
}