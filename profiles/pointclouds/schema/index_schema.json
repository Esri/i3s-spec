{
    "title": "I3S point cloud scene layer: index",
    "type": "object",
    "$schema": "http://json-schema.org/draft-04/schema",
    "description": "Describes the index (i.e. bounding volume tree) of the layer.",
  "properties": {
    "nodeVersion": {
      "type": "integer",
      "description": "The version of the individual nodes format."
    },
    "nodesPerPage": {
      "type": "integer",
      "description": "The page size describes the number of nodes per paged index document. 64 is currently expected."
    },
    "boundingVolumeType": {
      "type": "string",
      "enum": [
        "obb"
      ],
      "enum-description": {
        "obb": "Oriented bounding box"
      },
      "description": "The bounding volume type. Only OBB is currently supported."
    },
    "lodSelectionMetricType": {
      "type": "string",
      "enum": [
        "density-threshold"
      ],
      "enum-description": {
        "density-threshold": "nodes[i].lodThreshold will represent an 'effective' 2D area for the node. This estimation works best when the point cloud scene layer represent a surface and is not volumetric in nature. World space density would be Dw = node.pointCount / node.effectiveArea which we call Ds once converted to screen space. Client would switch LOD when Ds is less/greater than a threshold defined by the client. For example, 0.1 point per pixel square. Note for point cloud scene layer creation: If each point footprint is assumed to be identical (say 0.1x0.1 unit), then the lodThreshold may be computed as number_of_point * point_footprint for a leaf node and sum( children[i].effective_area) for inner nodes."
      },
      "description": "Defines how `node.lodThreshold` should be interpreted"
    }


  },
  "required": [
    "nodeVersion",
    "nodesPerPage",
    "lodSelectionMetricType"
  ],
    "esriDocumentation": {
        "examples": [
           {
             "title": "index",
             "code": {
                "index": 
                {
                    "nodeVersion": 1, 
                    "boundingVolumeType": "obb", 
                    "nodesPerPage": 64, 
                    "lodSelectionMetricType": "density-threshold"
                   }
                }   
            }
        ]
    }
}